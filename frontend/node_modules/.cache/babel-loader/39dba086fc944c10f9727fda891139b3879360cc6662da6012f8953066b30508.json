{"ast":null,"code":"import _toConsumableArray from\"/home/joke/Videos/ecommerce/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Link,useNavigate,useParams,useLocation}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){// Use hooks from React Router v6 instead of 'match' and 'location'\nvar _useParams=useParams(),id=_useParams.id;var location=useLocation();var navigate=useNavigate();var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(id){dispatch(addToCart(id,qty));}},[dispatch,id,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){navigate('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"w-100\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","useParams","useLocation","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","_useParams","id","location","navigate","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","children","md","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","price","Control","as","value","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["/home/joke/Videos/ecommerce/backend/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Link, useNavigate, useParams, useLocation  } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Row, Col, ListGroup, Image, Form, Button, Card } from 'react-bootstrap'\nimport Message from '../components/Message'\nimport { addToCart, removeFromCart } from '../actions/cartAction'\n\nfunction CartScreen() {\n\n  // Use hooks from React Router v6 instead of 'match' and 'location'\n  const { id } = useParams()\n  const location = useLocation()\n  const navigate = useNavigate()\n \n  const qty = location.search ? Number(location.search.split('=')[1]) : 1\n\n  const dispatch = useDispatch()\n\n  const cart = useSelector(state => state.cart)\n  const { cartItems } = cart\n\n\n  useEffect(() => {\n    if(id){\n      dispatch(addToCart(id, qty))\n    }\n  }, [dispatch,id, qty])\n\n  const removeFromCartHandler = (id) => {\n      dispatch(removeFromCart(id))\n  }\n \n  const checkoutHandler = () => {\n    navigate('/login?redirect=shipping')\n  }\n\n  return (  \n    <Row>\n      <Col md={8}>\n        <h1>Shopping Cart</h1>\n        {cartItems.length === 0 ? (\n          <Message variant='info'>\n            Your cart is empty <Link to='/'>Go Back</Link>\n          </Message>\n        ) : (\n          <ListGroup variant=\"flush\">\n              {cartItems.map(item => (\n                <ListGroup.Item key={item.product}>\n                  <Row>\n                    <Col md={2}>\n                      <Image src={item.image} alt={item.name} fluid rounded />\n                    </Col>\n                    <Col md={3}>\n                      <Link to={`/product/${item.product}`}>{item.name}</Link>\n                    </Col>\n                    <Col md={2}>\n                      ${item.price}\n                    </Col>\n                    <Col md={3}>\n                      <Form.Control as=\"select\" value={item.qty} onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}>\n                        {\n                            [...Array(item.countInStock).keys()].map((x) => (\n                                <option key={x + 1} value={x + 1}>\n                                    {x + 1}\n                                </option>\n                            ))\n                        }\n                      </Form.Control>\n                    </Col>\n\n                    <Col md={1}>\n                        <Button type='button' variant='light' onClick={() => removeFromCartHandler(item.product)}>\n                          <i className='fas fa-trash'></i>\n                        </Button>\n                    </Col>\n                  </Row>\n                </ListGroup.Item>\n              ))}\n          </ListGroup>\n        )\n        \n        }\n      </Col>\n\n      <Col md={4}>\n        <Card>\n          <ListGroup variant='flush'>\n            <ListGroup.Item>\n                <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\n                ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\n            </ListGroup.Item>\n\n            <ListGroup.Item>\n              <Button type='button' className='w-100' disabled={cartItems.length === 0} onClick={checkoutHandler}>\n                  Proceed To Checkout\n              </Button>\n            </ListGroup.Item>\n          </ListGroup>\n        </Card>\n      </Col>\n    </Row>\n  )\n} \n\nexport default CartScreen\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}